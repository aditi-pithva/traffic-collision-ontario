<div class="container mt-5">
  <h2 class="mb-4 text-center">Upload Data for Fatality Prediction</h2>
  <div class="row justify-content-center">
      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="TIME" class="form-label">TIME:</label>
              <input  type="number" id="TIME" class="form-control" formControlName="TIME">
            </div>
            <div class="mb-3">
              <label for="STREET1" class="form-label">STREET1:</label>
              <input type="text" id="STREET1" class="form-control" formControlName="STREET1">
            </div>
            <div class="mb-3">
              <label for="STREET2" class="form-label">STREET2:</label>
              <input type="text" id="STREET2" class="form-control" formControlName="STREET2">
            </div>
            <div class="mb-3">
              <label for="ROAD_CLASS" class="form-label">ROAD CLASS:</label>
              <select id="ROAD_CLASS" class="form-control" formControlName="ROAD_CLASS">
                <option *ngFor="let option of roadClassOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="DISTRICT" class="form-label">DISTRICT:</label>
              <input type="text" id="DISTRICT" class="form-control" formControlName="DISTRICT">
            </div>
            <div class="mb-3">
              <label for="LATITUDE" class="form-label">LATITUDE:</label>
              <input type="number" id="LATITUDE" class="form-control" formControlName="LATITUDE">
            </div>
            <div class="mb-3">
              <label for="LONGITUDE" class="form-label">LONGITUDE:</label>
              <input  type="number" id="LONGITUDE" class="form-control" formControlName="LONGITUDE">
            </div>
            <div class="mb-3">
              <label for="ACCLOC" class="form-label">ACCLOC:</label>
              <select id="ACCLOC" class="form-control" formControlName="ACCLOC">
                <option *ngFor="let option of accLocOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="TRAFFCTL" class="form-label">TRAFFCTL:</label>
              <select id="TRAFFCTL" class="form-control" formControlName="TRAFFCTL">
                <option *ngFor="let option of trafficControlOption" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="VISIBILITY" class="form-label">VISIBILITY:</label>
              <select id="VISIBILITY" class="form-control" formControlName="VISIBILITY">
                <option *ngFor="let option of visibilityOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="LIGHT" class="form-label">LIGHT:</label>
              <select id="LIGHT" class="form-control" formControlName="LIGHT">
                <option *ngFor="let option of lightOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="RDSFCOND" class="form-label">RDSFCOND:</label>
              <select id="RDSFCOND" class="form-control" formControlName="RDSFCOND">
                <option *ngFor="let option of rdsfCondOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="IMPACTYPE" class="form-label">IMPACTYPE:</label>
              <select id="IMPACTYPE" class="form-control" formControlName="IMPACTYPE">
                <option *ngFor="let option of impactTypeOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="INVTYPE" class="form-label">INVTYPE:</label>
              <select id="INVTYPE" class="form-control" formControlName="INVTYPE">
                <option *ngFor="let option of invTypeOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="INVAGE" class="form-label">INVAGE:</label>
              <input type="number" id="INVAGE" class="form-control" formControlName="INVAGE">
            </div>
            <div class="mb-3">
              <label for="INJURY" class="form-label">INJURY:</label>
              <select id="INJURY" class="form-control" formControlName="INJURY">
                <option *ngFor="let option of injuryOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="VEHTYPE" class="form-label">VEHTYPE:</label>
              <select id="VEHTYPE" class="form-control" formControlName="VEHTYPE">
                <option *ngFor="let option of vehTypeOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="AUTOMOBILE" class="form-label">AUTOMOBILE:</label>
              <select id="AUTOMOBILE" class="form-control" formControlName="AUTOMOBILE">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="MOTORCYCLE" class="form-label">MOTORCYCLE:</label>
              <select id="MOTORCYCLE" class="form-control" formControlName="MOTORCYCLE">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="TRUCK" class="form-label">TRUCK:</label>
              <select id="TRUCK" class="form-control" formControlName="TRUCK">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
          </div>
          <div class="col-md-6">
            
            <div class="mb-3">
              <label for="PEDESTRIAN" class="form-label">PEDESTRIAN:</label>
              <select id="PEDESTRIAN" class="form-control" formControlName="PEDESTRIAN"  (change)="onPedestrianChange($event)">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div *ngIf="isPedestrian">
              <div class="mb-3">
                <label for="PEDTYPE" class="form-label">PEDTYPE:</label>
                <select id="PEDTYPE" class="form-control" formControlName="PEDTYPE">
                  <option *ngFor="let option of pedTypeOptions" [value]="option">{{ option }}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="PEDACT" class="form-label">PEDACT:</label>
                <select id="PEDACT" class="form-control" formControlName="PEDACT">
                  <option *ngFor="let option of pedActOptions" [value]="option">{{ option }}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="PEDCOND" class="form-label">PEDCOND:</label>
                <select id="PEDCOND" class="form-control" formControlName="PEDCOND">
                  <option *ngFor="let option of pedCondOptions" [value]="option">{{ option }}</option>
                </select>
              </div>
            </div>
          
            <div class="mb-3">
              <label for="CYCLIST" class="form-label">CYCLIST:</label>
              <select id="CYCLIST" class="form-control" formControlName="CYCLIST" (change)="onCylistChange($event)">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
    
            <div *ngIf="isCyclist">
              <div class="mb-3">
                <label for="CYCLISTYPE" class="form-label">CYCLISTYPE:</label>
                <select id="CYCLISTYPE" class="form-control" formControlName="CYCLISTYPE">
                  <option *ngFor="let option of cyclistTypeOptions" [value]="option">{{ option }}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="CYCACT" class="form-label">CYCACT:</label>
                <select id="CYCACT" class="form-control" formControlName="CYCACT">
                  <option *ngFor="let option of cycActOptions" [value]="option">{{ option }}</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="CYCCOND" class="form-label">CYCCOND:</label>
                <select id="CYCCOND" class="form-control" formControlName="CYCCOND">
                  <option *ngFor="let option of cycCondOptions" [value]="option">{{ option }}</option>
                </select>
              </div>
            </div>
            <div class="mb-3">
              <label for="TRSN_CITY_VEH" class="form-label">TRSN CITY VEH:</label>
              <select id="TRSN_CITY_VEH" class="form-control" formControlName="TRSN_CITY_VEH">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="EMERG_VEH" class="form-label">EMERG VEH:</label>
              <select id="EMERG_VEH" class="form-control" formControlName="EMERG_VEH">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="PASSENGER" class="form-label">PASSENGER:</label>
              <select id="PASSENGER" class="form-control" formControlName="PASSENGER">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="SPEEDING" class="form-label">SPEEDING:</label>
              <select id="SPEEDING" class="form-control" formControlName="SPEEDING">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="AG_DRIV" class="form-label">AG DRIV:</label>
              <select id="AG_DRIV" class="form-control" formControlName="AG_DRIV">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="REDLIGHT" class="form-label">REDLIGHT:</label>
              <select id="REDLIGHT" class="form-control" formControlName="REDLIGHT">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="ALCOHOL" class="form-label">ALCOHOL:</label>
              <select id="ALCOHOL" class="form-control" formControlName="ALCOHOL">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="DISABILITY" class="form-label">DISABILITY:</label>
              <select id="DISABILITY" class="form-control" formControlName="DISABILITY">
                <option *ngFor="let option of yesNoOptions" [value]="option">{{ option }}</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="HOOD_158" class="form-label">HOOD 158:</label>
              <input type="number" id="HOOD_158" class="form-control" formControlName="HOOD_158">
            </div>
            <div class="mb-3">
              <label for="NEIGHBOURHOOD_158" class="form-label">NEIGHBOURHOOD 158:</label>
              <input type="text" id="NEIGHBOURHOOD_158" class="form-control" formControlName="NEIGHBOURHOOD_158">
            </div>
            <div class="mb-3">
              <label for="HOOD_140" class="form-label">HOOD 140:</label>
              <input type="number" id="HOOD_140" class="form-control" formControlName="HOOD_140">
            </div>
            <div class="mb-3">
              <label for="NEIGHBOURHOOD_140" class="form-label">NEIGHBOURHOOD 140:</label>
              <input type="text" id="NEIGHBOURHOOD_140" class="form-control" formControlName="NEIGHBOURHOOD_140">
            </div>
            <div class="mb-3">
              <label for="DIVISION" class="form-label">DIVISION:</label>
              <input type="text" id="DIVISION" class="form-control" formControlName="DIVISION">
            </div>
    
          </div>

        </div>
      
        <div class="text-center">
          <button type="submit" class="btn btn-outline-primary" [disabled]="form.invalid">
            <i class="fas fa-upload"></i> Submit
          </button>
        </div>
      </form>

      <div *ngIf="errorMessage" class="mt-3">
        <div class="alert alert-danger" role="alert">
          {{ errorMessage }}
        </div>
      </div>
  </div>

  <div *ngIf="predictionResult" class="mt-5">
    <h3 class="text-center">Fatality Prediction</h3>
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">OBJECT_ID</th>
          <th scope="col">ACCLASS</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of predictionResult">
          <td>{{ item.OBJECT_ID }}</td>
          <td>{{ item.ACCLASS }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
